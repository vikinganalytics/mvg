<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Automatic Mode Identification (ModeID) &mdash; MultiViz Analytics Engine Library  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Population Based Anomaly Detection (BlackSheep)" href="blacksheep.html" />
    <link rel="prev" title="KPI Demo" href="kpidemo.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/VA_Symbol_DarkBlue.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/1-brief_overview.html">Brief Overview - How to use the MVG library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/0-check_version.html">Check Version</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/2-sources_and_measurements.html">Sources and Measurements Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/6-analysis_visual.html">Analysis and Results Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/5-analysis_classes.html">Analysis Classes - Unified Interface to Analysis Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/3-tabular_example.html">Working with Tabular Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/7-labeling.html">Labeling of Measurements and Label Propagation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/8-inference.html">Model Inference for New Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/4-error_handling.html">Error Handling Example</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Features</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="general.html">Using MVG features</a></li>
<li class="toctree-l1"><a class="reference internal" href="kpidemo.html">KPI Demo</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Automatic Mode Identification (ModeID)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-does-modeid-do">What does ModeId do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-does-modeid-work">How does ModeId work?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#use-cases-for-the-algorithm">Use cases for the algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-the-algorithm-via-mvg">Using the algorithm via mvg</a></li>
<li class="toctree-l2"><a class="reference internal" href="#analysis-parameters">Analysis Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#structure-of-the-results">Structure of the Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="blacksheep.html">Population Based Anomaly Detection (BlackSheep)</a></li>
<li class="toctree-l1"><a class="reference internal" href="label_propagation.html">Label Propagation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../advanced/callback.html">Callback on Analysis Completion</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/mvg.html">MutliViz Analytics Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities_reference/analysis_classes.html">MutliViz Analysis Classes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MultiViz Analytics Engine Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Automatic Mode Identification (ModeID)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/content/features/ModeId.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="automatic-mode-identification-modeid">
<h1>Automatic Mode Identification (ModeID)<a class="headerlink" href="#automatic-mode-identification-modeid" title="Link to this heading"></a></h1>
<img alt="../../_images/modeid_sales.png" src="../../_images/modeid_sales.png" />
<section id="what-does-modeid-do">
<h2>What does ModeId do?<a class="headerlink" href="#what-does-modeid-do" title="Link to this heading"></a></h2>
<p>ModeId preforms Automatic Mode Identification on a time series of
vibration measurements: the algorithm will automatically detect a
number of operational modes in the time series data.</p>
<p>An operational mode is a time period where the data
exhibits a similar structure. For a pump, different
operational modes could either reflect different usages in a production
process like different fluids to be pumped, on-off state, or a
developing failure.</p>
</section>
<section id="how-does-modeid-work">
<h2>How does ModeId work?<a class="headerlink" href="#how-does-modeid-work" title="Link to this heading"></a></h2>
<p>The mode identification algorithm is an unsupervised algorithm.
It works by first converting all vibration measurements
from the time domain into the frequency domain and then selecting the most relevant
frequency bands. After that it performs a clustering of the
frequency domain data. A number of runs are conducted to
find the optimal number of clusters ensuring to neither over- or
under fit the model. The resulting clusters represent
the operational modes.</p>
<p>Each data point is assigned a probability of it belonging to the
assigned cluster, if the probability is very low the point is labeled
as “uncertain”.</p>
</section>
<section id="use-cases-for-the-algorithm">
<h2>Use cases for the algorithm<a class="headerlink" href="#use-cases-for-the-algorithm" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Find operational modes (“normal”, “failure”, …).</p></li>
<li><p>Overview representations of vibration data time series.</p></li>
<li><p>Quickly investigate and classify/label large amounts of vibration data.</p></li>
<li><p>Anomaly detection by means of using the points labeled “uncertain”.</p></li>
</ul>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h2>
<p>The example shows the application of Automatic Mode Identification to
one year of data from a heatpump (no frequency domain data in this
example). The algorithm correctly detects 4
modes:</p>
<ul class="simple">
<li><p>Never heating: occurs during summer, when no heating is required.</p></li>
<li><p>Always heating: occurs during winter, when the heatpump works
constantly</p></li>
<li><p>Intermittent heating: Two modes for autumn/spring when the heatpump
is heating, but not constantly.</p></li>
</ul>
<img alt="../../_images/modeid_heatpump.png" src="../../_images/modeid_heatpump.png" />
</section>
<section id="using-the-algorithm-via-mvg">
<h2>Using the algorithm via mvg<a class="headerlink" href="#using-the-algorithm-via-mvg" title="Link to this heading"></a></h2>
<p>For code example see the Visual Analysis Example.</p>
<ol class="arabic simple">
<li><p>Upload vibration time series data to a source, a minimum of 20 data points is
required.</p></li>
<li><p>Request an analysis for the source.</p></li>
<li><p>Read the results(see below).</p></li>
</ol>
</section>
<section id="analysis-parameters">
<h2>Analysis Parameters<a class="headerlink" href="#analysis-parameters" title="Link to this heading"></a></h2>
<p>The ModeId feature requires no parameters except the source Id (sid)
feature (“ModeId”).</p>
<p>By default, ModeId will not require any additional, algorithmic input parameters,
as it has a built in optimization function to determine the
optimal parameters, most notably the number of modes.</p>
<p>If, however, a certain number of modes is desired in the analysis
result, the optimizer can be disabled and a specific number of modes
(e.g 3) can be set by sending the following parameters.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;optimized&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s1">&#39;number_of_clusters&#39;</span><span class="p">:</span> <span class="mi">3</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="structure-of-the-results">
<h2>Structure of the Results<a class="headerlink" href="#structure-of-the-results" title="Link to this heading"></a></h2>
<p>The result returned by the analysis call will be a dictionary
containing four lists: the <em>timestamps</em>, the <em>label</em> (aka operational
modes), the <em>mode_probability</em> and <em>uncertain</em> where a logical value of <code class="docutils literal notranslate"><span class="pre">True</span></code> indicates an
uncertain assignment to the mode, which could be an indication of an anomaly.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;timestamps&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">timestamps</span> <span class="o">...</span><span class="p">],</span>
    <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span> <span class="nb">list</span> <span class="n">labels</span> <span class="p">(</span><span class="o">=</span><span class="n">mode</span> <span class="n">numbers</span><span class="p">)</span><span class="o">...</span><span class="p">],</span>
    <span class="s1">&#39;uncertain&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">booleans</span> <span class="n">indicating</span> <span class="n">uncertain</span> <span class="n">modes</span><span class="o">...</span><span class="p">]</span>
    <span class="s1">&#39;mode_probability&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span> <span class="nb">list</span> <span class="n">mode</span> <span class="n">probabilities</span> <span class="k">for</span> <span class="n">each</span> <span class="n">timestamps</span><span class="o">...</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In addition, the results returned by the analysis include an additional dictionary with the “Emerging Modes”.
“Emerging Modes” is an additional result output that describes the first appearance of each mode.
The dictionary contains four lists: the <em>modes</em>, the <em>emerging_time</em> corresponding to the epoch of first appearance of
each mode , the <em>max_prob_time</em> corresponding to the epoch with the largest mode probability and
<em>max_probability</em> for each mode.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;modes&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">modes</span> <span class="o">...</span><span class="p">],</span>
    <span class="s1">&#39;emerging_time&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span> <span class="nb">list</span> <span class="n">timestamps</span> <span class="k">for</span> <span class="n">first</span> <span class="n">appearance</span> <span class="n">of</span> <span class="n">each</span> <span class="n">mode</span><span class="o">...</span><span class="p">],</span>
    <span class="s1">&#39;max_prob_time&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span> <span class="nb">list</span> <span class="n">timestamps</span> <span class="k">with</span> <span class="n">the</span> <span class="n">maximum</span> <span class="n">mode</span> <span class="n">probability</span><span class="o">...</span><span class="p">]</span>
    <span class="s1">&#39;max_probability&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span> <span class="nb">list</span> <span class="k">with</span> <span class="n">the</span> <span class="n">maximum</span> <span class="n">mode</span> <span class="n">probabilities</span><span class="o">...</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>The algorithm is agnostic to the scale of the measurements, but the
scale for all measurements needs to be consistent.</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="kpidemo.html" class="btn btn-neutral float-left" title="KPI Demo" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="blacksheep.html" class="btn btn-neutral float-right" title="Population Based Anomaly Detection (BlackSheep)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Viking Analytics AB.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>